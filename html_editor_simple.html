<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTMLä¿®æ”¹å·¥å…· - å®ç”¨ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 16px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: calc(100vh - 200px);
        }

        .left-panel, .right-panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            background: #f8f9fa;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-title {
            font-weight: 600;
            color: #2c3e50;
            font-size: 16px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        .code-input {
            flex: 1;
            padding: 20px;
            border: none;
            resize: none;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.5;
            background: #fafafa;
            outline: none;
        }

        .modification-section {
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-action {
            padding: 10px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            text-align: center;
            transition: all 0.2s;
        }

        .quick-action:hover {
            background: #e9ecef;
            border-color: #3498db;
        }

        .modification-input {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            resize: vertical;
            outline: none;
            transition: border-color 0.2s;
        }

        .modification-input:focus {
            border-color: #3498db;
        }

        .modification-controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .preview-container {
            flex: 1;
            padding: 0;
            overflow: hidden;
        }

        .preview-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        .status-bar {
            padding: 10px 20px;
            background: #ecf0f1;
            border-radius: 0 0 12px 12px;
            font-size: 12px;
            color: #7f8c8d;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .example-section {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
        }

        .example-title {
            font-weight: 600;
            color: #17a2b8;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .example-text {
            font-size: 13px;
            color: #6c757d;
            line-height: 1.5;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ› ï¸ HTMLä¿®æ”¹å·¥å…· - å®ç”¨ç‰ˆ</h1>
            <p>ç®€å•ç›´æ¥çš„HTMLä¿®æ”¹å·¥å…·ï¼Œæ”¯æŒåŸºç¡€æ–‡æœ¬æ›¿æ¢å’Œå…ƒç´ æ“ä½œ</p>
        </div>

        <div class="main-content">
            <!-- å·¦ä¾§é¢æ¿ -->
            <div class="left-panel">
                <div class="panel-header">
                    <span class="panel-title">ğŸ“ HTMLä»£ç ç¼–è¾‘</span>
                    <div>
                        <button class="btn btn-primary" onclick="previewHTML()">é¢„è§ˆ</button>
                        <button class="btn btn-success" onclick="saveHTML()">ä¿å­˜</button>
                    </div>
                </div>
                
                <textarea 
                    class="code-input" 
                    id="htmlInput" 
                    placeholder="è¯·ç²˜è´´æ‚¨çš„HTMLä»£ç ..."
                ></textarea>

                <div class="modification-section">
                    <label style="display: block; margin-bottom: 15px; font-weight: 600; color: #2c3e50;">
                        ğŸ¯ å¿«é€Ÿæ“ä½œ
                    </label>
                    
                    <div class="quick-actions">
                        <div class="quick-action" onclick="showTextReplaceDialog()">
                            ğŸ“ æ–‡æœ¬æ›¿æ¢
                        </div>
                        <div class="quick-action" onclick="showDeleteDialog()">
                            ğŸ—‘ï¸ åˆ é™¤å†…å®¹
                        </div>
                        <div class="quick-action" onclick="showStyleDialog()">
                            ğŸ¨ ä¿®æ”¹æ ·å¼
                        </div>
                        <div class="quick-action" onclick="showAddDialog()">
                            â• æ·»åŠ å†…å®¹
                        </div>
                    </div>

                    <label for="modificationInput" style="display: block; margin-bottom: 10px; font-weight: 600; color: #2c3e50;">
                        âœï¸ æ‰‹åŠ¨ä¿®æ”¹æŒ‡ä»¤
                    </label>
                    <textarea 
                        class="modification-input" 
                        id="modificationInput"
                        placeholder="è¾“å…¥ä¿®æ”¹æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š&#10;replace:æ—§æ–‡æœ¬->æ–°æ–‡æœ¬&#10;delete:è¦åˆ é™¤çš„æ–‡æœ¬&#10;style:color->red&#10;add:bottom->æ–°å†…å®¹"
                    ></textarea>
                    
                    <div class="modification-controls">
                        <button class="btn btn-primary" onclick="applyModifications()">
                            âœ¨ åº”ç”¨ä¿®æ”¹
                        </button>
                        <button class="btn btn-warning" onclick="resetHTML()">ğŸ”„ é‡ç½®</button>
                    </div>

                    <div class="example-section">
                        <div class="example-title">ğŸ’¡ æŒ‡ä»¤æ ¼å¼è¯´æ˜</div>
                        <div class="example-text">
                            â€¢ <strong>replace:æ—§æ–‡æœ¬->æ–°æ–‡æœ¬</strong> - æ›¿æ¢æ–‡æœ¬<br>
                            â€¢ <strong>delete:è¦åˆ é™¤çš„æ–‡æœ¬</strong> - åˆ é™¤åŒ…å«è¯¥æ–‡æœ¬çš„å…ƒç´ <br>
                            â€¢ <strong>style:å±æ€§->å€¼</strong> - ä¿®æ”¹æ ·å¼ï¼ˆå¦‚ color->redï¼‰<br>
                            â€¢ <strong>add:ä½ç½®->å†…å®¹</strong> - æ·»åŠ å†…å®¹ï¼ˆä½ç½®ï¼štop/bottomï¼‰<br>
                            â€¢ æ¯è¡Œä¸€ä¸ªæŒ‡ä»¤ï¼Œæ”¯æŒå¤šä¸ªæŒ‡ä»¤åŒæ—¶æ‰§è¡Œ
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§é¢æ¿ -->
            <div class="right-panel">
                <div class="panel-header">
                    <span class="panel-title">ğŸ‘ï¸ å®æ—¶é¢„è§ˆ</span>
                    <button class="btn btn-primary" onclick="refreshPreview()">ğŸ”„ åˆ·æ–°é¢„è§ˆ</button>
                </div>
                
                <div class="preview-container">
                    <iframe class="preview-frame" id="previewFrame" src="about:blank"></iframe>
                </div>

                <div class="status-bar">
                    <span id="statusText">å°±ç»ª</span>
                    <span id="lastModified"></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentHTML = '';

        // é¢„è§ˆHTML
        function previewHTML() {
            const htmlContent = document.getElementById('htmlInput').value;
            if (!htmlContent.trim()) {
                showStatus('è¯·å…ˆè¾“å…¥HTMLä»£ç ', 'error');
                return;
            }

            currentHTML = htmlContent;
            const previewFrame = document.getElementById('previewFrame');
            
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            previewFrame.src = url;
            
            showStatus('âœ… é¢„è§ˆå·²æ›´æ–°', 'success');
            updateLastModified();
        }

        // åº”ç”¨ä¿®æ”¹
        function applyModifications() {
            const htmlContent = document.getElementById('htmlInput').value;
            const modifications = document.getElementById('modificationInput').value;

            if (!htmlContent.trim()) {
                showStatus('è¯·å…ˆè¾“å…¥HTMLä»£ç ', 'error');
                return;
            }

            if (!modifications.trim()) {
                showStatus('è¯·è¾“å…¥ä¿®æ”¹æŒ‡ä»¤', 'error');
                return;
            }

            showStatus('ğŸ”„ æ­£åœ¨å¤„ç†ä¿®æ”¹...', 'info');

            try {
                let modifiedHTML = htmlContent;
                const lines = modifications.split('\n').filter(line => line.trim());
                
                for (const line of lines) {
                    modifiedHTML = processCommand(modifiedHTML, line.trim());
                }
                
                document.getElementById('htmlInput').value = modifiedHTML;
                previewHTML();
                document.getElementById('modificationInput').value = '';
                
                showStatus('âœ… ä¿®æ”¹å·²æˆåŠŸåº”ç”¨ï¼', 'success');
            } catch (error) {
                showStatus('âŒ ä¿®æ”¹å¤±è´¥: ' + error.message, 'error');
            }
        }

        // å¤„ç†å•ä¸ªå‘½ä»¤
        function processCommand(html, command) {
            if (command.startsWith('replace:')) {
                const parts = command.substring(8).split('->');
                if (parts.length === 2) {
                    const oldText = parts[0].trim();
                    const newText = parts[1].trim();
                    return html.replace(new RegExp(escapeRegExp(oldText), 'g'), newText);
                }
            } else if (command.startsWith('delete:')) {
                const textToDelete = command.substring(7).trim();
                return deleteTextFromHTML(html, textToDelete);
            } else if (command.startsWith('style:')) {
                const parts = command.substring(6).split('->');
                if (parts.length === 2) {
                    const property = parts[0].trim();
                    const value = parts[1].trim();
                    return addStyleToHTML(html, property, value);
                }
            } else if (command.startsWith('add:')) {
                const parts = command.substring(4).split('->');
                if (parts.length === 2) {
                    const position = parts[0].trim();
                    const content = parts[1].trim();
                    return addContentToHTML(html, position, content);
                }
            }
            return html;
        }

        // ä»HTMLä¸­åˆ é™¤æ–‡æœ¬
        function deleteTextFromHTML(html, textToDelete) {
            // ç®€å•çš„åˆ é™¤ç­–ç•¥ï¼šåˆ é™¤åŒ…å«è¯¥æ–‡æœ¬çš„è¡Œ
            const lines = html.split('\n');
            const filteredLines = lines.filter(line => !line.includes(textToDelete));
            return filteredLines.join('\n');
        }

        // æ·»åŠ æ ·å¼åˆ°HTML
        function addStyleToHTML(html, property, value) {
            // æŸ¥æ‰¾æ˜¯å¦å·²æœ‰styleæ ‡ç­¾
            if (html.includes('<style>')) {
                // åœ¨ç°æœ‰styleæ ‡ç­¾ä¸­æ·»åŠ 
                return html.replace('</style>', `  body * { ${property}: ${value} !important; }\n</style>`);
            } else {
                // åœ¨headä¸­æ·»åŠ æ–°çš„styleæ ‡ç­¾
                const styleTag = `<style>\n  body * { ${property}: ${value} !important; }\n</style>`;
                if (html.includes('</head>')) {
                    return html.replace('</head>', `${styleTag}\n</head>`);
                } else {
                    return `${styleTag}\n${html}`;
                }
            }
        }

        // æ·»åŠ å†…å®¹åˆ°HTML
        function addContentToHTML(html, position, content) {
            const contentDiv = `<div style="text-align: center; padding: 20px; color: #666;">${content}</div>`;
            
            if (position === 'top') {
                if (html.includes('<body>')) {
                    return html.replace('<body>', `<body>\n${contentDiv}`);
                } else {
                    return `${contentDiv}\n${html}`;
                }
            } else if (position === 'bottom') {
                if (html.includes('</body>')) {
                    return html.replace('</body>', `${contentDiv}\n</body>`);
                } else {
                    return `${html}\n${contentDiv}`;
                }
            }
            return html;
        }

        // è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // æ˜¾ç¤ºæ–‡æœ¬æ›¿æ¢å¯¹è¯æ¡†
        function showTextReplaceDialog() {
            const oldText = prompt('è¯·è¾“å…¥è¦æ›¿æ¢çš„æ–‡æœ¬:');
            if (oldText) {
                const newText = prompt('è¯·è¾“å…¥æ–°æ–‡æœ¬:');
                if (newText !== null) {
                    document.getElementById('modificationInput').value = `replace:${oldText}->${newText}`;
                }
            }
        }

        // æ˜¾ç¤ºåˆ é™¤å¯¹è¯æ¡†
        function showDeleteDialog() {
            const textToDelete = prompt('è¯·è¾“å…¥è¦åˆ é™¤çš„æ–‡æœ¬ï¼ˆå°†åˆ é™¤åŒ…å«è¯¥æ–‡æœ¬çš„è¡Œï¼‰:');
            if (textToDelete) {
                document.getElementById('modificationInput').value = `delete:${textToDelete}`;
            }
        }

        // æ˜¾ç¤ºæ ·å¼å¯¹è¯æ¡†
        function showStyleDialog() {
            const property = prompt('è¯·è¾“å…¥CSSå±æ€§åï¼ˆå¦‚ color, background-color, font-sizeï¼‰:');
            if (property) {
                const value = prompt('è¯·è¾“å…¥CSSå±æ€§å€¼ï¼ˆå¦‚ red, #ff0000, 18pxï¼‰:');
                if (value) {
                    document.getElementById('modificationInput').value = `style:${property}->${value}`;
                }
            }
        }

        // æ˜¾ç¤ºæ·»åŠ å¯¹è¯æ¡†
        function showAddDialog() {
            const position = prompt('è¯·é€‰æ‹©æ·»åŠ ä½ç½®ï¼ˆè¾“å…¥ top æˆ– bottomï¼‰:');
            if (position === 'top' || position === 'bottom') {
                const content = prompt('è¯·è¾“å…¥è¦æ·»åŠ çš„å†…å®¹:');
                if (content) {
                    document.getElementById('modificationInput').value = `add:${position}->${content}`;
                }
            }
        }

        // ä¿å­˜HTMLæ–‡ä»¶
        function saveHTML() {
            const htmlContent = document.getElementById('htmlInput').value;
            if (!htmlContent.trim()) {
                showStatus('æ²¡æœ‰å†…å®¹å¯ä¿å­˜', 'error');
                return;
            }

            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `modified_page_${new Date().getTime()}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showStatus('âœ… æ–‡ä»¶å·²ä¿å­˜åˆ°ä¸‹è½½æ–‡ä»¶å¤¹', 'success');
        }

        // é‡ç½®HTML
        function resetHTML() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
                document.getElementById('htmlInput').value = '';
                document.getElementById('modificationInput').value = '';
                document.getElementById('previewFrame').src = 'about:blank';
                showStatus('å·²é‡ç½®', 'success');
            }
        }

        // åˆ·æ–°é¢„è§ˆ
        function refreshPreview() {
            previewHTML();
        }

        // æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
        function showStatus(message, type = 'info') {
            const statusElement = document.getElementById('statusText');
            statusElement.textContent = message;
            
            if (type === 'error') {
                statusElement.style.color = '#e74c3c';
            } else if (type === 'success') {
                statusElement.style.color = '#27ae60';
            } else {
                statusElement.style.color = '#3498db';
            }
            
            setTimeout(() => {
                statusElement.textContent = 'å°±ç»ª';
                statusElement.style.color = '#7f8c8d';
            }, 3000);
        }

        // æ›´æ–°æœ€åä¿®æ”¹æ—¶é—´
        function updateLastModified() {
            const lastModifiedElement = document.getElementById('lastModified');
            lastModifiedElement.textContent = `æœ€åæ›´æ–°: ${new Date().toLocaleString('zh-CN')}`;
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            showStatus('ğŸš€ å®ç”¨ç‰ˆå·¥å…·å·²å°±ç»ªï¼', 'success');
        });
    </script>
</body>
</html>